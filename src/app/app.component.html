<div class="layout-wrapper">
  <div class="layout-topbar">
    <a class="menu-button" (click)="sidebarVisible = !sidebarVisible">
      <i class="fa fa-bars"></i>
    </a>
    <div class="logo-container">
      <a class="logo-topbar">
        <img alt="logo" src="../assets/images/logo42.png"/>
        <div class="version-label">Version 0.12.2</div>
      </a>
      <span>
        <i *ngIf="(isConnected$ | async)" class="fa fa-wifi fa-2x online-icon" pTooltip="Online"></i>
        <i *ngIf="(!(isConnected$ | async))" class="fa fa-wifi fa-2x offline-icon" pTooltip="Offline"></i>
      </span>
    </div>
    <ul class="topbar-menu">
      <li>
        <label for="gameSelect">GameSystem</label>
        <p-dropdown
          id="gameSelect"
          (onChange)="gameSystemChanged($event)"
          [options]="gameSystems"
          [(ngModel)]="selectedGameSystem">
        </p-dropdown>
      </li>
    </ul>
  </div>
  <div class="layout-sub-topbar" *ngIf="showSubTopBar && !saveData">
    <span>Data modified. Please save to save and publish</span>
    <button pButton type="button" class="ui-button-success save-data-button"
            (click)="commitUpdates()" label="Save" icon="fa-check"></button>
  </div>
  <p-sidebar [(visible)]="sidebarVisible"
             [baseZIndex]="10000">
    <div>
      <a class="logo-sidebar">
        <img alt="logo" src="../assets/images/logo42.png"/>
      </a>
    </div>

    <div class="nav-welcome">
      Welcome
    </div>
    <div (click)="sidebarVisible = false" class="nav-menu">
      <a routerLink="/tournaments">
        <i class="fa fa-gamepad fa-2x" aria-hidden="true"></i>
        <span>Tournaments</span>
      </a>
    </div>
    <div class="nav-menu">
      <a (click)="sidebarVisible = false" routerLink="/players">
        <i class="fa fa-users fa-2x" aria-hidden="true"></i>
        <span>Players</span>
      </a>
    </div>
    <div class="nav-menu">
      <a (click)="openTournamentsWithOpenNewTournamentDialog()">
        <i class="fa fa-plus fa-2x" aria-hidden="true"></i>
        <span>New Tournament</span>
      </a>
    </div>
    <div class="nav-menu">
      <a (click)="openPlayerWithOpenNewPlayerDialog()">
        <i class="fa fa-plus fa-2x" aria-hidden="true"></i>
        <span>New Player</span>
      </a>
    </div>
  </p-sidebar>

  <div class="layout-content"  [ngClass]="{'with-sub-top-bar': showSubTopBar}">
    <p-growl [life]="5000" [(value)]="messages"></p-growl>

    <ng-container *ngIf="(saveData && (isConnected$ | async))">
      <div class="heading">Save and Publish Data...</div>
      <div class="centered-content-container">
        <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
      </div>
    </ng-container>

    <ng-container *ngIf="(saveData && !(isConnected$ | async))">
      <div class="heading">Attention! Your Offline. Data will stored in Browser and synced when your online...</div>
      <div class="centered-content-container">
        <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
      </div>
    </ng-container>

    <router-outlet *ngIf="(!saveData)"></router-outlet>
  </div>
</div>



